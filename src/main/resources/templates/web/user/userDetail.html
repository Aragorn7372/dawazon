{% include "common/header" %}
{% include "common/navbar" %}

<div class="container col-12">

    <div class="admin-header" style="text-align: center; display: flex; flex-direction: column; align-items: center; margin-bottom: 30px;">
        <div class="admin-avatar">
            {% if user.avatarUrl %}
            <img src="{{ user.avatarUrl }}" alt="Avatar" class="profile-img" style="width: 100px; height: 100px; border-radius: 50%; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
            {% else %}
            <div style="width: 100px; height: 100px; border-radius: 50%; background-color: #eee; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #ccc; border: 1px solid #ddd;">
                {{ user.username|slice(0,1)|upper }}
            </div>
            {% endif %}
        </div>
        <h3 class="product-title" style="margin-top: 15px;">{{ user.username }}</h3>
        <p class="text-muted-small">ID de Usuario: #{{ user.id }}</p>
    </div>

    <div class="product-main-grid">

        <div class="product-info" style="text-align: left; align-items: stretch; background: #fff; padding: 0;">
            <h4 style="border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; margin-bottom: 15px; color: #333;">Información Personal</h4>

            <div class="info-row" style="margin-bottom: 15px;">
                <label class="form-label" style="font-weight: bold; color: #555;">Nombre Completo</label>
                <div style="font-size: 1.1rem; color: #000;">{{ user.nombre }}</div>
            </div>

            <div class="info-row" style="margin-bottom: 15px;">
                <label class="form-label" style="font-weight: bold; color: #555;">Correo Electrónico</label>
                <div style="font-size: 1.1rem; color: #000;">
                    <a href="mailto:{{ user.email }}" style="text-decoration: none; color: #007185;">{{ user.email }}</a>
                </div>
            </div>

            <div class="info-row" style="margin-bottom: 15px;">
                <label class="form-label" style="font-weight: bold; color: #555;">Teléfono</label>
                <div style="font-size: 1.1rem; color: #000;">
                    {{ user.telefono|default('No registrado') }}
                </div>
            </div>
        </div>

        <div class="product-info" style="text-align: left; align-items: stretch; background: #fff; padding: 0;">
            <h4 style="border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; margin-bottom: 15px; color: #333;">Permisos y Estado</h4>

            <div class="info-row" style="margin-bottom: 20px;">
                <label class="form-label" style="display: block; font-weight: bold; color: #555; margin-bottom: 8px;">Roles Asignados</label>
                <div class="roles-display">
                    {% for role in user.getRoles %}
                    <span class="role-badge">{{ role.name }}</span>
                    {% else %}
                    <span class="text-muted-small">Sin roles asignados</span>
                    {% endfor %}
                </div>
            </div>

            <div class="info-row">
                <label class="form-label" style="font-weight: bold; color: #555;">Estado de la cuenta</label>
                <div style="margin-top: 5px;">
                    <span class="status-badge status-completada">Activo</span>
                </div>
            </div>
        </div>

    </div>

    <div class="action-buttons admin-actions" style="margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px;">

        <a href="/admin/users" class="btn-gradient"
           style="text-decoration: none; display: flex; justify-content: center; align-items: center; background-color: #e7e7e7; color: #333; box-shadow: none; width: 200px;">
            Volver a la lista
        </a>

        {% if isHimSelf or isAdmin %}
        <a href="{% if isHimSelf %}/auth/me{% else %}/admin/users/edit/{{user.id}}{% endif %}"
           class="btn-gradient"
           style="text-decoration: none; display: flex; justify-content: center; align-items: center; width: 200px;">
            Editar Usuario
        </a>
        {% endif %}

    </div>

</div>

{% include "common/footer" %}